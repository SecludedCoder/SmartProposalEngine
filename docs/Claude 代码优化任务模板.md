# Claude 代码优化任务模板

## 任务说明
请优化以下代码文件，提升代码质量、性能和可维护性。

## 核心约束（必须严格遵守）

### 1. 接口不变原则
- **保持所有公共接口不变**：导出的函数、类、类型定义的签名必须完全一致
- **保持文件导出不变**：不能增加或删除任何 export 语句
- **保持外部依赖不变**：不能修改 import 语句（除非是未使用的导入）

### 2. 输出要求
- **必须输出完整的优化后代码文件**
- **使用 artifact 格式输出**，便于直接复制使用
- **在代码前简要说明主要优化点**（3-5个要点）

### 3. 兼容性保证
- **不能改变任何外部可见的行为**
- **保持向后兼容**：相同输入必须产生相同输出
- **保持错误处理行为一致**

## 优化目标（按优先级排序）

### 1. 代码质量
- [ ] 消除重复代码
- [ ] 提升代码可读性
- [ ] 改善命名规范
- [ ] 简化复杂逻辑
- [ ] 添加必要的类型注解

### 2. 性能优化
- [ ] 减少不必要的计算
- [ ] 优化循环和递归
- [ ] 改善内存使用
- [ ] 减少对象创建
- [ ] 使用更高效的数据结构

### 3. 健壮性提升
- [ ] 完善错误处理
- [ ] 添加输入验证
- [ ] 处理边界情况
- [ ] 防止潜在的运行时错误

### 4. 可维护性
- [ ] 添加关键注释（复杂逻辑说明）
- [ ] 提取魔法数字为常量
- [ ] 分解过长的函数
- [ ] 改善代码组织结构

## 文件上下文

### 当前文件信息
- **文件路径**: `[文件路径]`
- **主要功能**: [简要描述文件功能]
- **对外接口**: [列出所有 export 的内容]

### 依赖关系
```typescript
// 被依赖方（本文件被哪些文件使用）
- [文件1]: 使用了 [具体接口]
- [文件2]: 使用了 [具体接口]

// 依赖方（本文件依赖的外部模块）
- [模块1]: 使用了 [具体功能]
- [模块2]: 使用了 [具体功能]
```

### 接口契约（绝对不能修改）
```typescript
// 列出所有公共接口的类型定义
export interface XXX {
  // ...
}

export function functionName(params: Type): ReturnType {
  // 签名不能变
}
```

## 具体优化建议（可选）
如果您有特定的优化方向，请在此说明：
- [ ] 重点优化 [具体函数/类]
- [ ] 解决 [具体性能问题]
- [ ] 改善 [具体代码质量问题]

## 附加说明
- **代码风格**: [ESLint/Prettier 配置要求]
- **目标环境**: [Node.js/浏览器版本]
- **特殊要求**: [项目特定的编码规范]

---

## 待优化代码文件

```[语言]
[在此粘贴完整的代码文件]
```

---

## 优化示例格式

请按以下格式输出：

### 主要优化点
1. **性能优化**：[具体说明]
2. **代码简化**：[具体说明]
3. **错误处理**：[具体说明]

### 优化后的完整代码
[使用 artifact 输出完整代码]